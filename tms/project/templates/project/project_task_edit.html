from pygments import style
{% extends "project/base_site.html" %}
{% load i18n %}
{% block title %} {% trans "Project Details" %} {% endblock title %}

{% block sidebar_class %}menu_fixed{% endblock sidebar_class %}

{% block stylesheets %}
  {{ block.super }}
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.2/chosen.css" />

  <style>
 /* .scrollable-menu {
    height: auto;
    max-height: 200px;
    overflow-x: hidden;
    */
}
  </style>
{% endblock stylesheets %}

{% block content %}
  <div class="right_col" role="main">
    <div class="">
   
   <!-- top menu bar -->
{% include "project/project_nave.html" %}
   

      <div class="clearfix"></div>
 <form action="" method="post" class="form-horizontal form-label-left input_mask" novalidate enctype="multipart/form-data">
{% csrf_token %}
      <div class="row">
        <div class="col-md-12">
          <div class="x_panel">
            <div class="x_title">
            <div class="col-md-7 col-sm-12 col-xs-12">
          
              <h2 class="right">  <div class="task_number"  >  {{task.id}}</div>  {{task.name}}  </h2>
              
              </div>
               <div class="col-md-5 col-sm-12 col-xs-12">
                     <ul class="nav nav-pills left float-left task-ctions" role="tablist">
                     
                 
                             <button type="submit" class="btn btn-success">  <li>   <i class="fa fa-save"></i>  {{_('Save Changes')}}</button></li>
                           </ul>
              </div>
              <div class="clearfix"></div>
            </div>


            <div class="x_content">

              <div class="col-md-8 col-sm-8 col-xs-12">
    
       
 <!-- start task detail ------------------------------------- -->
 <div class="col-md-12 col-sm-12 col-xs-12">
 
<div class="form-group">
<!-- task title -->
{{form.name.label_tag}}
 {{form.name}}
            </div>
                            
<!--  decription -->
 <div class="form-group">    
 {{form.desc.label_tag}}
    {{form.desc}}
     </div>
  
  <!--  decription -->
 <div class="form-group">    
 {{form.note.label_tag}}
    {{form.note}}
     </div>
     
                      
          
<!--  attachmenet -->
<fieldset class="fieldset_normal">
        <legend>{{ _('Attachment')}}</legend>
      
         <ul class="list-unstyled project_files">
                      <li><a href=""><i class="fa fa-file-word-o"></i> Functional-requirements.docx</a>
                      </li>
                      <li><a href=""><i class="fa fa-file-pdf-o"></i> UAT.pdf</a>
                      </li>
                      <li><a href=""><i class="fa fa-mail-forward"></i> Email-from-flatbal.mln</a>
                      </li>
                      <li><a href=""><i class="fa fa-picture-o"></i> Logo.png</a>
                      </li>
                      <li><a href=""><i class="fa fa-file-word-o"></i> Contract-10_12_2014.docx</a>
                      </li>
                    </ul>
        
      </fieldset>
     
     
      <!--  save and return control -->
 <div class="form-group"> 
  
     <a href="{% url 'ns-project:project-list' %}" >  <button type="button" class="btn btn-primary">{{ _('Back')}}</button></a>

      <button type="submit" class="btn btn-success">    <i class="fa fa-save"></i>  {{_('Save Changes')}}</button>
        </div>  
                   


</div>
          
           
             
              </div>
              <!-- start project-detail sidebar -->
              
              <div class="col-md-4 col-sm-4 col-xs-12">
                  
        <fieldset class="fieldset_normal">
        <legend>{{_("Basci Info")}}</legend>
   
   <ul class="list-unstyled">
                      <li class="clearfix"><div class="basic_info_lable col-md-4 float-right">{{_("project Name")}}</div> <div class="basic_info  col-md-7">{{project_detail.name}} </div>
                      </li>
                      <li class="clearfix task-ctions"><div class="basic_info_lable  col-md-4 float-right">{{_("Assigned To")}} </div> <div class="basic_info col-md-7" style="position:relative;">  {{form.assignedto}} 
                                             <a href="#" data-url="{% url 'ns-project:update-assignto-task' task.id %}" class="update-task-assignto" style="    position: absolute;
    top: 0px;
    left: 0px;
    /* margin-top: 8px; */
    height: 38px;
    color: #bbb;
    line-height: 24px;
    font-size: 15px;
    /* height: 5px; */
    width: 51px;
    display: inline-block;">

                      <i class="fa fa-search form-control-feedback right" aria-hidden="true"></i>
                  
                      </a>
                      </div>
                      </li>
                      <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("Status")}}</div> <div class="basic_info col-md-7">  {{form.status}}</div>
                        </li>
                     <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("Start Date")}}</div> <div class="basic_info col-md-7">  {{form.startdate}}                 <span class="fa fa-calendar-o form-control-feedback right"  aria-hidden="true"></span>
</div>
                        </li>
                        <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("End Date")}}</div> <div class="basic_info col-md-7">  {{form.enddate}}                 <span class="fa fa-calendar-o form-control-feedback right"  aria-hidden="true"></span>
</div>
                        </li>
                    </ul>

      </fieldset>
                  
               <fieldset class="fieldset_normal">
        <legend>{{_("Actions")}}</legend>
   
   <ul class="list-unstyled">
                      <li class="clearfix"><div class="basic_info_lable col-md-4 float-right">{{_("Created By")}}</div> <div class="basic_info  col-md-7 float-right">{{ createdby.empname}}</div>
                      </li>
                      <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("Finished By")}}</div> <div class="basic_info col-md-7 float-right">  {{ finishedby.empname }}</div>
                      </li>
                      <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("Cancelled By")}}</div><div class="basic_info col-md-7 float-right">  {{cancelledby.empname}}</div>
                      </li>
                      <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("Closed By")}}</div> <div class="basic_info col-md-7 float-right">  {{closedby.empname}}</div>
                      </li>
                      <li class="clearfix"><div class="basic_info_lable  col-md-4 float-right">{{_("Cancelled Reason")}}</div> <div class="basic_info  col-md-7 float-right"> {{task.mailto}}</div>
                      </li>
                     
                    </ul>
                    

      </fieldset>
                  <!--    <div class="text-center mtop20">
                      <a href="#" class="btn btn-sm btn-primary">Add files</a>
                      <a href="#" class="btn btn-sm btn-warning">Report contact</a>
                    </div>  -->
         

              </div>
              <!-- end project-detail sidebar -->

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  </form>
  <!-- THE MODAL WE WILL BE USING -->
<div class="modal fade" id="modal-task">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
      </div>
   </div>
</div>
{% endblock content %}

{% block javascripts %}
  {{ block.super }}

<script>
var loadForm = function () {
btn = $(this);
$.ajax({
  url: $(this).attr("data-url"),
  type: 'get',
  dataType: 'json',
  beforeSend: function () {
    $("#modal-task").modal("show");
  },
  success: function (data) {
    $("#modal-task .modal-content").html(data.html_form);
  }
});

}; //end load form

var saveForm = function () {
var form = $(this);
$.ajax({
  url: form.attr("action"),
  data: form.serialize(),
  type: form.attr("method"),
  dataType: 'json',
  success: function (data) {
    if (data.form_is_valid) {
      $(".messages").html('<li class="alert alert-success">'+data.message+"</li>");
      $("#status_"+data.id).html('<span class=" btn btn-warning  task-'+data.status+'" >'+data.status+'</span>');

      $("#"+data.icon).addClass('paction_disable').closest('a').removeAttr("href").removeAttr("data-url").removeAttr("class");
      $("#modal-task").modal("hide");
     // location.reload();
    }
    else {
      $("#modal-task .modal-content").html(data.html_form);
    }
  }
});
return false;
}; //end save form

//Update task start date and status
$(".task-ctions").on("click", ".update-task-start", loadForm);
$("#modal-task").on("submit", ".task-update-start-form", saveForm);

//finish task 
$(".task-ctions").on("click", ".update-task-finish", loadForm);
$("#modal-task").on("submit", ".update-finish-task-form", saveForm);

//close task 
$(".task-ctions").on("click", ".update-task-close", loadForm);
$("#modal-task").on("submit", ".update-close-task-form", saveForm);

//cancel task 
$(".task-ctions").on("click", ".update-task-cancel", loadForm);
$("#modal-task").on("submit", ".update-cancel-task-form", saveForm);

//pause task
$(".task-ctions").on("click", ".update-task-pause", loadForm);
$("#modal-task").on("submit", ".update-pause-task-form", saveForm);

//assign to task 
$(".task-ctions").on("click", ".update-task-assignto", loadForm);
$("#modal-task").on("submit", ".update-assignto-task-form", saveForm);
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.2/chosen.jquery.js"></script>
  <script>

     $(".chosen").data("placeholder","Select Frameworks...").chosen();
     $(".chosen").chosen({no_results_text: "Oops, nothing found!"}); 
      $('.chosen').chosen({allow_single_deselect: true,no_results_text: "Ã™â€žÃ˜Â§ Ã™Å Ã™Ë†Ã˜Â¬Ã˜Â¯ Ã™â€ Ã˜ÂªÃ˜Â§Ã˜Â¦Ã˜Â¬!"});


      
      
</script>


  <script>
  $('#single_cal_1').daterangepicker({
      singleDatePicker: true,
      singleClasses: "picker_1",
       locale: {
            format: 'YYYY-MM-DD'
        },
  }, function(start, end, label) {
     
  });
  
  $('#single_cal_2').daterangepicker({
      autoUpdateInput: true,
      singleDatePicker: true,
      singleClasses: "picker_1",
      locale: {
            format: 'YYYY-MM-DD',
            language: 'ar-EG',
        },
  }, function(start, end, label) {
    
  });
  </script>
  
{% endblock javascripts %}
